How to create opencv cascade samples.

exp.

./pos/info.dat

1004.jpg  1  334 58 485 567
1005.jpg  1  235 173 657 574
1006.jpg  2  318 38 103 128  179 49 136 152
1008.jpg  1  270 81 271 365
1009.jpg  1  816 41 212 235

./neg/ng.txt

img/10004.jpg
img/10005.jpg
img/10007.jpg
img/10008.jpg
img/10009.jpg

1.

opencv_createsamples -info ./pos/info.dat -vec ./vec/positive.vec -num 400 -w 50 -h 25

2.

opencv_traincascade -data ./cascade -vec ./vec/positive.vec -bg ./neg/ng.txt -numPos 350 -numNeg 1350 -featureType LBP -mode ALL -w 50 -h 25


I have achieved my goal and trained good cascade.

First you need a couple of original samples (don't use one and multiply it with create samples). I have used 10 different photos of beer bottles, for each I have created 200 hundred samples, then I have combined all samples in one vector file with 2000 samples.
-w 20 -h 35 should match aspect ratio of your original image
Relation of positive samples to negative should be around 2:1 (there should be more positive samples)
Number of stages you should chose by yourself (for me it is 12-13). The more stages you set the more precisely will be your cascade, but you can also overtrain your cascade and it won't find anything. The precision of your cascade is shown by acceptanceRatio on the last stage it should be around this value 0.000412662 or less.
But if you get acceptanceRatio like this 7.83885e-07 your cascade is probably overtrained and it wont find anything, try to set less stages.
