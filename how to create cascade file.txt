How to create opencv cascade files.

exp.

Before create cascade,we create storage folder.
like below...
C:/cascade/pos
          /neg
          /vec
          /dat
          /cas
          
put positive iamge files to pos folder and negative image files to neg folder.

'info.dat' file need to be exist pos folder.
So,we create info.dat file using C++ code. 
compile and run 'Create "info.dat" file.cpp' file in my libraly.

created info.dat file written like below...

./pos/info.dat

1004.jpg  1  0 0 485 567
1005.jpg  1  0 0 657 574
1006.jpg  1  0 0 103 128
1008.jpg  1  0 0 271 365
1009.jpg  1  0 0 212 235

next,
we create ng.txt file in /neg folder.
like info.dat file,we use C++ code.
open 

./neg/ng.txt

neg/10004.jpg
neg/10005.jpg
neg/10007.jpg
neg/10008.jpg
neg/10009.jpg

1.

opencv_createsamples -info ./pos/info.dat -vec ./vec/positive.vec -num 750 -w 50 -h 25

2.

opencv_traincascade -data ./cascade -vec ./vec/positive.vec -bg ./neg/ng.txt -numPos 750 -numNeg 1350 -featureType LBP -mode ALL -w 50 -h 25


I have achieved my goal and trained good cascade.

First you need a couple of original samples (don't use one and multiply it with create samples). I have used 10 different photos of beer bottles, for each I have created 200 hundred samples, then I have combined all samples in one vector file with 2000 samples.
-w 20 -h 35 should match aspect ratio of your original image
Relation of positive samples to negative should be around 2:1 (there should be more positive samples)
Number of stages you should chose by yourself (for me it is 12-13). The more stages you set the more precisely will be your cascade, but you can also overtrain your cascade and it won't find anything. The precision of your cascade is shown by acceptanceRatio on the last stage it should be around this value 0.000412662 or less.
But if you get acceptanceRatio like this 7.83885e-07 your cascade is probably overtrained and it wont find anything, try to set less stages.
